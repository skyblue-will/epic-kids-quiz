<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
<title>Epic Kids Quiz ‚≠ê</title>
<style>
:root {
  --bg: #0f0f23;
  --card: #1a1a3e;
  --text: #f0f0f0;
  --muted: #888;
  --correct: #22c55e;
  --wrong: #ef4444;
  --star-wars: #FFE81F;
  --pokemon: #FF6B6B;
  --minecraft: #5BBF3E;
  --gold: #f5c518;
}
*{margin:0;padding:0;box-sizing:border-box}
body{font-family:'Segoe UI',system-ui,-apple-system,sans-serif;background:var(--bg);color:var(--text);min-height:100dvh;overflow-x:hidden}

.screen{display:none;flex-direction:column;align-items:center;justify-content:center;min-height:100dvh;padding:1.5rem;text-align:center}
.screen.active{display:flex}

/* Title */
.title h1{font-size:clamp(2rem,7vw,3.5rem);font-weight:800;letter-spacing:-0.02em;margin-bottom:0.5rem}
.title .icons{font-size:3rem;margin-bottom:1rem;display:flex;gap:0.5rem;justify-content:center}
.title p{color:var(--muted);margin-bottom:2rem;font-size:1rem}

.btn{border:none;border-radius:12px;padding:0.85rem 2.5rem;font-size:1.1rem;font-weight:700;cursor:pointer;transition:transform 0.1s;color:#fff;background:linear-gradient(135deg,#6366f1,#8b5cf6)}
.btn:active{transform:scale(0.95)}

/* Category select */
.categories{display:flex;gap:1rem;margin-bottom:2rem;flex-wrap:wrap;justify-content:center}
.cat-card{width:110px;padding:1.25rem 0.5rem;border-radius:14px;background:var(--card);border:3px solid transparent;cursor:pointer;transition:all 0.15s;text-align:center}
.cat-card.selected{border-color:var(--gold);transform:scale(1.05)}
.cat-card .icon{font-size:2.5rem;margin-bottom:0.3rem}
.cat-card .label{font-size:0.85rem;font-weight:700}

/* Quiz screen */
.quiz{padding:1rem;justify-content:flex-start;gap:0}
.progress-bar{width:100%;height:6px;background:#333;border-radius:3px;margin-bottom:0.75rem;overflow:hidden}
.progress-fill{height:100%;border-radius:3px;transition:width 0.4s ease}
.quiz-header{display:flex;justify-content:space-between;align-items:center;width:100%;margin-bottom:1rem;padding:0 0.25rem}
.quiz-header .round-badge{font-size:0.75rem;padding:0.3rem 0.75rem;border-radius:20px;font-weight:700;text-transform:uppercase;letter-spacing:0.05em}
.quiz-header .score-display{font-size:0.9rem;font-weight:700}
.quiz-header .score-display span{color:var(--gold)}

.question-area{flex:1;display:flex;flex-direction:column;align-items:center;justify-content:center;width:100%;max-width:500px;margin:0 auto}
.q-category{font-size:0.75rem;text-transform:uppercase;letter-spacing:0.1em;color:var(--muted);margin-bottom:0.25rem}
.q-emoji{font-size:3.5rem;margin-bottom:0.75rem}
.q-text{font-size:clamp(1.1rem,4vw,1.5rem);font-weight:700;line-height:1.3;margin-bottom:1.5rem;min-height:3em}

.answers{display:grid;grid-template-columns:1fr 1fr;gap:0.75rem;width:100%;max-width:500px}
.answer-btn{background:var(--card);border:2px solid #333;border-radius:12px;padding:1rem 0.75rem;font-size:clamp(0.9rem,3vw,1.05rem);font-weight:600;color:var(--text);cursor:pointer;transition:all 0.15s;text-align:center;min-height:60px;display:flex;align-items:center;justify-content:center}
.answer-btn:active{transform:scale(0.97)}
.answer-btn.correct{border-color:var(--correct);background:#22c55e22;color:var(--correct)}
.answer-btn.wrong{border-color:var(--wrong);background:#ef444422;color:var(--wrong)}
.answer-btn.reveal{border-color:var(--correct);opacity:0.6}
.answer-btn.disabled{pointer-events:none}

.feedback{margin-top:1rem;min-height:3rem;display:flex;flex-direction:column;align-items:center;gap:0.5rem}
.feedback .msg{font-size:1.5rem;font-weight:800}
.feedback .detail{font-size:0.85rem;color:var(--muted)}
.next-btn{background:none;border:2px solid #555;border-radius:10px;padding:0.6rem 2rem;color:var(--text);font-size:0.95rem;font-weight:600;cursor:pointer;transition:all 0.15s}
.next-btn:hover{border-color:var(--gold);color:var(--gold)}

/* Results */
.results .big-score{font-size:clamp(4rem,12vw,7rem);font-weight:800;color:var(--gold);line-height:1}
.results .trophy{font-size:4rem;margin-bottom:0.5rem}
.results .subtitle{color:var(--muted);margin-bottom:0.5rem}
.results .breakdown{display:flex;gap:1.5rem;margin:1.5rem 0;flex-wrap:wrap;justify-content:center}
.results .bd-item{text-align:center}
.results .bd-item .num{font-size:1.8rem;font-weight:800}
.results .bd-item .lbl{font-size:0.7rem;color:var(--muted);text-transform:uppercase}
.results .stars{font-size:2rem;margin-bottom:1.5rem}

/* Animations */
@keyframes shake{0%,100%{transform:translateX(0)}25%{transform:translateX(-5px)}75%{transform:translateX(5px)}}
@keyframes bounce{0%,100%{transform:scale(1)}50%{transform:scale(1.15)}}
.shake{animation:shake 0.3s ease}
.bounce{animation:bounce 0.3s ease}

@keyframes confetti-fall{0%{transform:translateY(-10px) rotate(0deg);opacity:1}100%{transform:translateY(100vh) rotate(720deg);opacity:0}}
.confetti{position:fixed;top:-10px;width:10px;height:10px;border-radius:2px;animation:confetti-fall 2.5s ease-in forwards;pointer-events:none;z-index:100}
</style>
</head>
<body>

<!-- TITLE -->
<div id="titleScreen" class="screen title active">
  <div class="icons">‚öîÔ∏è ‚ö° ‚õèÔ∏è</div>
  <h1>Epic Quiz!</h1>
  <p>Star Wars ¬∑ Pok√©mon ¬∑ Minecraft</p>
  <div class="categories">
    <div class="cat-card selected" data-cat="all" onclick="pickCat(this)">
      <div class="icon">üåü</div>
      <div class="label">All Mixed</div>
    </div>
    <div class="cat-card" data-cat="starwars" onclick="pickCat(this)">
      <div class="icon">‚öîÔ∏è</div>
      <div class="label">Star Wars</div>
    </div>
    <div class="cat-card" data-cat="pokemon" onclick="pickCat(this)">
      <div class="icon">‚ö°</div>
      <div class="label">Pok√©mon</div>
    </div>
    <div class="cat-card" data-cat="minecraft" onclick="pickCat(this)">
      <div class="icon">‚õèÔ∏è</div>
      <div class="label">Minecraft</div>
    </div>
  </div>
  <button class="btn" onclick="startQuiz()">Let's Go! üöÄ</button>
</div>

<!-- QUIZ -->
<div id="quizScreen" class="screen quiz">
  <div class="progress-bar"><div class="progress-fill" id="progressFill"></div></div>
  <div class="quiz-header">
    <div class="round-badge" id="roundBadge">Easy</div>
    <div class="score-display">‚≠ê <span id="scoreNum">0</span></div>
  </div>
  <div class="question-area">
    <div class="q-category" id="qCat"></div>
    <div class="q-emoji" id="qEmoji"></div>
    <div class="q-text" id="qText"></div>
    <div class="answers" id="answers"></div>
    <div class="feedback" id="feedback"></div>
  </div>
</div>

<!-- RESULTS -->
<div id="resultScreen" class="screen results">
  <div class="trophy" id="trophyEmoji">üèÜ</div>
  <div class="big-score" id="finalScore">0</div>
  <div class="subtitle" id="finalLabel">out of 15</div>
  <div class="stars" id="finalStars"></div>
  <div class="breakdown" id="breakdown"></div>
  <button class="btn" onclick="resetQuiz()">Play Again! üîÑ</button>
</div>

<script>
// ============ QUESTIONS DATABASE ============
// 3 difficulty tiers: easy (ages 5-6), medium (6-7), hard (7-8)

const QUESTIONS = {
  starwars: {
    easy: [
      { q: "What colour is a Jedi's lightsaber usually?", a: ["Blue or green", "Pink", "Orange", "Grey"], c: 0, emoji: "üîµ", detail: "Jedi usually have blue or green lightsabers!" },
      { q: "What is the name of the big hairy Wookiee?", a: ["Chewbacca", "Yoda", "R2-D2", "Jabba"], c: 0, emoji: "üêª", detail: "Chewbacca is Han Solo's best friend!" },
      { q: "What colour is Darth Vader's lightsaber?", a: ["Green", "Blue", "Red", "Yellow"], c: 2, emoji: "üî¥", detail: "Bad guys always have red lightsabers!" },
      { q: "What is Baby Yoda's favourite food?", a: ["Pizza", "Frogs", "Chips", "Ice cream"], c: 1, emoji: "üê∏", detail: "Grogu loves eating frogs!" },
      { q: "What shape is the Death Star?", a: ["A cube", "A ball", "A triangle", "A star"], c: 1, emoji: "üåë", detail: "The Death Star is shaped like a big round ball!" },
      { q: "Who says 'I am your father'?", a: ["Yoda", "Darth Vader", "Luke", "Han Solo"], c: 1, emoji: "üò±", detail: "Darth Vader says it to Luke!" },
    ],
    medium: [
      { q: "What planet does Luke Skywalker grow up on?", a: ["Endor", "Hoth", "Tatooine", "Naboo"], c: 2, emoji: "üèúÔ∏è", detail: "Tatooine is a desert planet with two suns!" },
      { q: "What are the little teddy bear creatures called?", a: ["Jawas", "Ewoks", "Porgs", "Wookiees"], c: 1, emoji: "üß∏", detail: "Ewoks live on the forest moon of Endor!" },
      { q: "Who is Luke Skywalker's twin sister?", a: ["Padm√©", "Rey", "Leia", "Ahsoka"], c: 2, emoji: "üë∏", detail: "Princess Leia is Luke's twin!" },
      { q: "What does Yoda teach Luke to use?", a: ["A blaster", "The Force", "A spaceship", "A shield"], c: 1, emoji: "‚ú®", detail: "Yoda is a Jedi Master who teaches the Force!" },
      { q: "What is Han Solo's spaceship called?", a: ["X-Wing", "Star Destroyer", "Millennium Falcon", "TIE Fighter"], c: 2, emoji: "üöÄ", detail: "The Millennium Falcon is the fastest ship in the galaxy!" },
    ],
    hard: [
      { q: "What type of creature is Jabba?", a: ["A Wookiee", "A Hutt", "A Jedi", "An Ewok"], c: 1, emoji: "üêõ", detail: "Jabba the Hutt is a big slimy slug-like alien!" },
      { q: "What is the Mandalorian's real name?", a: ["Boba Fett", "Din Djarin", "Jango Fett", "Cad Bane"], c: 1, emoji: "ü™ñ", detail: "Din Djarin is the Mandalorian's real name!" },
      { q: "Which planet is covered in ice and snow?", a: ["Mustafar", "Hoth", "Tatooine", "Bespin"], c: 1, emoji: "‚ùÑÔ∏è", detail: "Hoth is freezing cold ‚Äî the rebels hid there!" },
      { q: "Who built C-3PO?", a: ["Obi-Wan", "Han Solo", "Anakin Skywalker", "Padm√©"], c: 2, emoji: "ü§ñ", detail: "Young Anakin built C-3PO as a boy!" },
      { q: "What colour is Mace Windu's lightsaber?", a: ["Blue", "Green", "Purple", "Red"], c: 2, emoji: "üü£", detail: "Mace Windu is the only Jedi with a purple lightsaber!" },
    ]
  },
  pokemon: {
    easy: [
      { q: "What colour is Pikachu?", a: ["Red", "Blue", "Yellow", "Green"], c: 2, emoji: "‚ö°", detail: "Pikachu is a yellow Electric-type Pok√©mon!" },
      { q: "What does Pikachu say?", a: ["Char char!", "Pika pika!", "Bulba!", "Squirtle!"], c: 1, emoji: "üí¨", detail: "Pika pika! Pikachu!" },
      { q: "What type of Pok√©mon is Charmander?", a: ["Water", "Grass", "Fire", "Electric"], c: 2, emoji: "üî•", detail: "Charmander is a Fire-type with a flame on its tail!" },
      { q: "What do you catch Pok√©mon with?", a: ["A net", "A Pok√© Ball", "A bag", "Your hands"], c: 1, emoji: "üî¥", detail: "Pok√© Balls are red and white!" },
      { q: "Who is Ash's best Pok√©mon friend?", a: ["Charizard", "Mewtwo", "Pikachu", "Eevee"], c: 2, emoji: "üß¢", detail: "Pikachu has been with Ash from the very start!" },
      { q: "Is Squirtle a water or fire Pok√©mon?", a: ["Fire", "Water", "Grass", "Rock"], c: 1, emoji: "üíß", detail: "Squirtle is a Water-type ‚Äî it's a little turtle!" },
    ],
    medium: [
      { q: "What does Charmander evolve into first?", a: ["Charizard", "Charmeleon", "Squirtle", "Bulbasaur"], c: 1, emoji: "ü¶é", detail: "Charmander evolves into Charmeleon, then Charizard!" },
      { q: "What type is super effective against Water?", a: ["Fire", "Ice", "Grass", "Rock"], c: 2, emoji: "üåø", detail: "Grass beats Water, Water beats Fire, Fire beats Grass!" },
      { q: "What is the name of the Pok√©mon professor?", a: ["Professor Pine", "Professor Oak", "Professor Elm", "Professor Birch"], c: 1, emoji: "üßë‚Äçüî¨", detail: "Professor Oak gives you your first Pok√©mon!" },
      { q: "How many Pok√©mon did the first games have?", a: ["50", "100", "151", "200"], c: 2, emoji: "üìã", detail: "The original 151 Pok√©mon ‚Äî gotta catch 'em all!" },
      { q: "What does Eevee evolve into with a Water Stone?", a: ["Flareon", "Jolteon", "Vaporeon", "Umbreon"], c: 2, emoji: "üíé", detail: "Vaporeon is Eevee's Water evolution!" },
    ],
    hard: [
      { q: "What is the strongest Pok√©mon in the first games?", a: ["Pikachu", "Charizard", "Mewtwo", "Mew"], c: 2, emoji: "üß¨", detail: "Mewtwo was created in a lab and is super powerful!" },
      { q: "What type is Gengar?", a: ["Dark", "Ghost and Poison", "Psychic", "Normal"], c: 1, emoji: "üëª", detail: "Gengar is Ghost and Poison type ‚Äî spooky!" },
      { q: "Which Pok√©mon is number 1 in the Pok√©dex?", a: ["Pikachu", "Charmander", "Bulbasaur", "Mew"], c: 2, emoji: "üìñ", detail: "Bulbasaur is #001 in the Pok√©dex!" },
      { q: "What Pok√©mon can Ditto transform into?", a: ["Only Pikachu", "Only legendaries", "Any Pok√©mon", "Only small ones"], c: 2, emoji: "ü™û", detail: "Ditto can copy any Pok√©mon it sees!" },
      { q: "What legendary bird is an Ice type?", a: ["Moltres", "Zapdos", "Articuno", "Ho-Oh"], c: 2, emoji: "üßä", detail: "Articuno is the legendary Ice bird!" },
    ]
  },
  minecraft: {
    easy: [
      { q: "What do you use to mine stone in Minecraft?", a: ["A sword", "A pickaxe", "A shovel", "An axe"], c: 1, emoji: "‚õèÔ∏è", detail: "Pickaxes are for mining stone and ores!" },
      { q: "What colour are Creepers?", a: ["Red", "Blue", "Green", "Purple"], c: 2, emoji: "üíö", detail: "Creepers are green and go BOOM!" },
      { q: "What do Creepers do when they get close?", a: ["Run away", "Dance", "Explode", "Fly"], c: 2, emoji: "üí•", detail: "SSSSsss... BOOM! Watch out for Creepers!" },
      { q: "What do you sleep in at night?", a: ["A chair", "A bed", "A boat", "A chest"], c: 1, emoji: "üõèÔ∏è", detail: "Beds skip the scary night time!" },
      { q: "What animal gives you wool?", a: ["Pig", "Cow", "Chicken", "Sheep"], c: 3, emoji: "üêë", detail: "Sheep drop wool when you shear them!" },
      { q: "What shape are ALL blocks in Minecraft?", a: ["Round", "Triangle", "Square/cube", "Star"], c: 2, emoji: "üü´", detail: "Everything in Minecraft is made of cubes!" },
    ],
    medium: [
      { q: "What do you need to make a torch?", a: ["Wood and coal", "Stone and iron", "Sand and water", "Wool and string"], c: 0, emoji: "üî¶", detail: "A stick and coal makes a torch to light up caves!" },
      { q: "What happens if you dig straight down?", a: ["You find diamonds", "You might fall in lava!", "Nothing bad", "You win the game"], c: 1, emoji: "üï≥Ô∏è", detail: "Never dig straight down ‚Äî you might fall into lava!" },
      { q: "What do you need to go to the Nether?", a: ["A boat", "A portal made of obsidian", "A ladder", "A diamond sword"], c: 1, emoji: "üü™", detail: "You build a Nether portal with obsidian and light it with flint and steel!" },
      { q: "What ore is the rarest to find?", a: ["Iron", "Gold", "Diamond", "Emerald"], c: 3, emoji: "üíé", detail: "Emeralds are actually rarer than diamonds!" },
      { q: "What mob drops gunpowder?", a: ["Zombie", "Skeleton", "Creeper", "Spider"], c: 2, emoji: "üí£", detail: "Creepers drop gunpowder when defeated!" },
    ],
    hard: [
      { q: "What do you throw to find a stronghold?", a: ["Snowball", "Eye of Ender", "Ender Pearl", "Fire Charge"], c: 1, emoji: "üëÅÔ∏è", detail: "Eyes of Ender float towards the stronghold!" },
      { q: "What is the final boss in Minecraft called?", a: ["The Wither", "The Ender Dragon", "Herobrine", "The Warden"], c: 1, emoji: "üêâ", detail: "The Ender Dragon lives in The End dimension!" },
      { q: "How many obsidian blocks do you need for a Nether portal?", a: ["8", "10", "12", "14"], c: 1, emoji: "üü™", detail: "You need 10 obsidian blocks for the portal frame!" },
      { q: "What do villagers trade with?", a: ["Gold", "Diamonds", "Emeralds", "Iron"], c: 2, emoji: "üßë‚Äçüåæ", detail: "Villagers love emeralds ‚Äî that's their money!" },
      { q: "What potion makes you invisible?", a: ["Potion of Speed", "Potion of Invisibility", "Potion of Strength", "Potion of Healing"], c: 1, emoji: "üß™", detail: "Potion of Invisibility ‚Äî mobs can't see you!" },
    ]
  }
};

// ============ GAME STATE ============
let selectedCat = 'all';
let questions = [];
let currentQ = 0;
let score = 0;
let answered = false;
let catScores = { starwars: {right:0,total:0}, pokemon: {right:0,total:0}, minecraft: {right:0,total:0} };

const DIFFICULTY_COLORS = { easy: '#22c55e', medium: '#f59e0b', hard: '#ef4444' };
const DIFFICULTY_LABELS = { easy: 'üü¢ Easy', medium: 'üü° Medium', hard: 'üî¥ Hard' };
const CAT_COLORS = { starwars: 'var(--star-wars)', pokemon: 'var(--pokemon)', minecraft: 'var(--minecraft)' };
const CAT_LABELS = { starwars: '‚öîÔ∏è Star Wars', pokemon: '‚ö° Pok√©mon', minecraft: '‚õèÔ∏è Minecraft' };
const TOTAL_QUESTIONS = 15; // 5 easy, 5 medium, 5 hard

const CORRECT_MSGS = ["Amazing! üéâ", "You got it! ‚≠ê", "Brilliant! üåü", "Yes! üí™", "Awesome! üî•", "Nailed it! üéØ", "Super! ‚ú®", "Wow! ü§©"];
const WRONG_MSGS = ["Not quite! üòÖ", "Oops! üôà", "Good try! üí™", "Nearly! ü§è", "So close! üòä"];

function pickCat(el) {
  document.querySelectorAll('.cat-card').forEach(c => c.classList.remove('selected'));
  el.classList.add('selected');
  selectedCat = el.dataset.cat;
}

function shuffle(arr) {
  const a = [...arr];
  for (let i = a.length - 1; i > 0; i--) {
    const j = Math.floor(Math.random() * (i + 1));
    [a[i], a[j]] = [a[j], a[i]];
  }
  return a;
}

function buildQuestions() {
  const cats = selectedCat === 'all' ? ['starwars', 'pokemon', 'minecraft'] : [selectedCat];
  const pool = { easy: [], medium: [], hard: [] };

  cats.forEach(cat => {
    ['easy', 'medium', 'hard'].forEach(diff => {
      QUESTIONS[cat][diff].forEach(q => {
        pool[diff].push({ ...q, cat, diff });
      });
    });
  });

  // Pick 5 easy, 5 medium, 5 hard
  const picked = [
    ...shuffle(pool.easy).slice(0, 5),
    ...shuffle(pool.medium).slice(0, 5),
    ...shuffle(pool.hard).slice(0, 5),
  ];

  return picked;
}

function startQuiz() {
  questions = buildQuestions();
  currentQ = 0;
  score = 0;
  answered = false;
  catScores = { starwars: {right:0,total:0}, pokemon: {right:0,total:0}, minecraft: {right:0,total:0} };
  showScreen('quizScreen');
  showQuestion();
}

function showScreen(id) {
  document.querySelectorAll('.screen').forEach(s => s.classList.remove('active'));
  document.getElementById(id).classList.add('active');
}

function showQuestion() {
  if (currentQ >= questions.length) {
    showResults();
    return;
  }

  answered = false;
  const q = questions[currentQ];
  const diff = q.diff;

  // Progress
  const pct = (currentQ / questions.length) * 100;
  const fill = document.getElementById('progressFill');
  fill.style.width = pct + '%';
  fill.style.background = DIFFICULTY_COLORS[diff];

  // Round badge
  const badge = document.getElementById('roundBadge');
  badge.textContent = DIFFICULTY_LABELS[diff];
  badge.style.background = DIFFICULTY_COLORS[diff] + '22';
  badge.style.color = DIFFICULTY_COLORS[diff];

  // Score
  document.getElementById('scoreNum').textContent = score;

  // Question
  document.getElementById('qCat').textContent = CAT_LABELS[q.cat];
  document.getElementById('qCat').style.color = CAT_COLORS[q.cat];
  document.getElementById('qEmoji').textContent = q.emoji;
  document.getElementById('qText').textContent = q.q;

  // Answers
  const answersEl = document.getElementById('answers');
  answersEl.innerHTML = '';
  q.a.forEach((ans, i) => {
    const btn = document.createElement('button');
    btn.className = 'answer-btn';
    btn.textContent = ans;
    btn.onclick = () => pickAnswer(i);
    answersEl.appendChild(btn);
  });

  // Clear feedback
  document.getElementById('feedback').innerHTML = '';
}

function pickAnswer(idx) {
  if (answered) return;
  answered = true;

  const q = questions[currentQ];
  const isCorrect = idx === q.c;
  const btns = document.querySelectorAll('.answer-btn');

  btns.forEach((btn, i) => {
    btn.classList.add('disabled');
    if (i === q.c) btn.classList.add('correct');
    if (i === idx && !isCorrect) btn.classList.add('wrong');
  });

  // Track score
  catScores[q.cat].total++;
  if (isCorrect) {
    score++;
    catScores[q.cat].right++;
    document.getElementById('scoreNum').textContent = score;
  }

  // Feedback
  const fb = document.getElementById('feedback');
  if (isCorrect) {
    const msg = CORRECT_MSGS[Math.floor(Math.random() * CORRECT_MSGS.length)];
    fb.innerHTML = `
      <div class="msg bounce" style="color:var(--correct)">${msg}</div>
      <div class="detail">${q.detail}</div>
      <button class="next-btn" onclick="nextQuestion()">Next ‚Üí</button>
    `;
  } else {
    const msg = WRONG_MSGS[Math.floor(Math.random() * WRONG_MSGS.length)];
    fb.innerHTML = `
      <div class="msg shake" style="color:var(--wrong)">${msg}</div>
      <div class="detail">${q.detail}</div>
      <button class="next-btn" onclick="nextQuestion()">Next ‚Üí</button>
    `;
  }
}

function nextQuestion() {
  currentQ++;
  showQuestion();
}

function showResults() {
  // Fill progress to 100%
  document.getElementById('progressFill').style.width = '100%';

  const pct = Math.round((score / questions.length) * 100);
  let trophy, label;
  if (pct >= 90) { trophy = 'üèÜ'; label = 'Quiz Champion!'; }
  else if (pct >= 70) { trophy = 'ü•á'; label = 'Superstar!'; }
  else if (pct >= 50) { trophy = '‚≠ê'; label = 'Great job!'; }
  else if (pct >= 30) { trophy = 'üëè'; label = 'Good try!'; }
  else { trophy = 'üí™'; label = 'Keep practising!'; }

  document.getElementById('trophyEmoji').textContent = trophy;
  document.getElementById('finalScore').textContent = `${score}/${questions.length}`;
  document.getElementById('finalLabel').textContent = label;

  // Stars
  const starCount = Math.ceil((score / questions.length) * 5);
  document.getElementById('finalStars').textContent = '‚≠ê'.repeat(starCount) + '‚òÜ'.repeat(5 - starCount);

  // Breakdown by category
  const bd = document.getElementById('breakdown');
  bd.innerHTML = '';
  Object.keys(catScores).forEach(cat => {
    const cs = catScores[cat];
    if (cs.total > 0) {
      bd.innerHTML += `
        <div class="bd-item">
          <div class="num" style="color:${CAT_COLORS[cat]}">${cs.right}/${cs.total}</div>
          <div class="lbl">${cat === 'starwars' ? 'Star Wars' : cat === 'pokemon' ? 'Pok√©mon' : 'Minecraft'}</div>
        </div>
      `;
    }
  });

  showScreen('resultScreen');

  // Confetti!
  if (pct >= 50) spawnConfetti();
}

function spawnConfetti() {
  const colors = ['#FFE81F', '#FF6B6B', '#5BBF3E', '#6366f1', '#f5c518', '#22c55e'];
  for (let i = 0; i < 40; i++) {
    const c = document.createElement('div');
    c.className = 'confetti';
    c.style.left = Math.random() * 100 + 'vw';
    c.style.background = colors[Math.floor(Math.random() * colors.length)];
    c.style.animationDelay = Math.random() * 1.5 + 's';
    c.style.animationDuration = (2 + Math.random() * 2) + 's';
    c.style.width = (6 + Math.random() * 8) + 'px';
    c.style.height = (6 + Math.random() * 8) + 'px';
    document.body.appendChild(c);
    setTimeout(() => c.remove(), 4000);
  }
}

function resetQuiz() {
  showScreen('titleScreen');
}
</script>
</body>
</html>
