<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
<title>Eric's Epic Quiz ‚≠ê</title>
<style>
:root {
  --bg: #0f0f23;
  --card: #1a1a3e;
  --text: #f0f0f0;
  --muted: #888;
  --correct: #22c55e;
  --wrong: #ef4444;
  --star-wars: #FFE81F;
  --pokemon: #FF6B6B;
  --minecraft: #5BBF3E;
  --gold: #f5c518;
}
*{margin:0;padding:0;box-sizing:border-box}
body{font-family:'Segoe UI',system-ui,-apple-system,sans-serif;background:var(--bg);color:var(--text);min-height:100dvh;overflow-x:hidden}

.screen{display:none;flex-direction:column;align-items:center;justify-content:center;min-height:100dvh;padding:1.5rem;text-align:center}
.screen.active{display:flex}

/* Title */
.title h1{font-size:clamp(1.8rem,7vw,3.2rem);font-weight:800;letter-spacing:-0.02em;margin-bottom:0.25rem}
.title h1 .name{color:var(--gold)}
.title .icons{font-size:3rem;margin-bottom:1rem;display:flex;gap:0.5rem;justify-content:center}
.title .greeting{color:var(--muted);margin-bottom:0.25rem;font-size:1rem}
.title .subtitle{color:var(--muted);margin-bottom:1.5rem;font-size:0.9rem}

.btn{border:none;border-radius:12px;padding:0.85rem 2.5rem;font-size:1.1rem;font-weight:700;cursor:pointer;transition:transform 0.1s;color:#fff;background:linear-gradient(135deg,#6366f1,#8b5cf6)}
.btn:active{transform:scale(0.95)}

.categories{display:flex;gap:0.75rem;margin-bottom:1.5rem;flex-wrap:wrap;justify-content:center}
.cat-card{width:100px;padding:1rem 0.5rem;border-radius:14px;background:var(--card);border:3px solid transparent;cursor:pointer;transition:all 0.15s;text-align:center}
.cat-card.selected{border-color:var(--gold);transform:scale(1.05)}
.cat-card .icon{font-size:2.2rem;margin-bottom:0.2rem}
.cat-card .label{font-size:0.8rem;font-weight:700}

.diff-row{display:flex;gap:0.6rem;margin-bottom:1rem;flex-wrap:wrap;justify-content:center}
.diff-pill{padding:0.45rem 1rem;border-radius:20px;font-size:0.8rem;font-weight:700;cursor:pointer;border:2px solid #333;background:transparent;color:var(--text);transition:all 0.15s}
.diff-pill.selected{border-color:var(--gold);background:var(--gold);color:#111}

.q-count-row{display:flex;gap:0.6rem;margin-bottom:1.5rem;flex-wrap:wrap;justify-content:center;align-items:center}
.q-count-row .lbl{font-size:0.8rem;color:var(--muted)}
.q-pill{padding:0.4rem 0.9rem;border-radius:20px;font-size:0.8rem;font-weight:700;cursor:pointer;border:2px solid #333;background:transparent;color:var(--text);transition:all 0.15s}
.q-pill.selected{border-color:var(--gold);background:var(--gold);color:#111}

/* Quiz screen */
.quiz{padding:1rem;justify-content:flex-start;gap:0}
.progress-bar{width:100%;height:6px;background:#333;border-radius:3px;margin-bottom:0.75rem;overflow:hidden}
.progress-fill{height:100%;border-radius:3px;transition:width 0.4s ease}
.quiz-header{display:flex;justify-content:space-between;align-items:center;width:100%;margin-bottom:0.5rem;padding:0 0.25rem}
.quiz-header .round-badge{font-size:0.7rem;padding:0.25rem 0.6rem;border-radius:20px;font-weight:700;text-transform:uppercase;letter-spacing:0.05em}
.quiz-header .q-counter{font-size:0.8rem;color:var(--muted)}
.quiz-header .score-display{font-size:0.9rem;font-weight:700}
.quiz-header .score-display span{color:var(--gold)}
.streak-display{font-size:0.8rem;color:var(--gold);min-height:1.2em;margin-bottom:0.25rem}

.question-area{flex:1;display:flex;flex-direction:column;align-items:center;justify-content:center;width:100%;max-width:500px;margin:0 auto}
.q-category{font-size:0.7rem;text-transform:uppercase;letter-spacing:0.1em;color:var(--muted);margin-bottom:0.2rem}
.q-emoji{font-size:3rem;margin-bottom:0.5rem;transition:transform 0.3s}
.q-text{font-size:clamp(1rem,3.5vw,1.35rem);font-weight:700;line-height:1.3;margin-bottom:1.25rem;min-height:2.5em}

.answers{display:grid;grid-template-columns:1fr 1fr;gap:0.6rem;width:100%;max-width:500px}
.answer-btn{background:var(--card);border:2px solid #333;border-radius:12px;padding:0.85rem 0.6rem;font-size:clamp(0.85rem,2.8vw,1rem);font-weight:600;color:var(--text);cursor:pointer;transition:all 0.15s;text-align:center;min-height:54px;display:flex;align-items:center;justify-content:center}
.answer-btn:active:not(.disabled){transform:scale(0.97)}
.answer-btn.correct{border-color:var(--correct);background:#22c55e22;color:var(--correct)}
.answer-btn.wrong{border-color:var(--wrong);background:#ef444422;color:var(--wrong)}
.answer-btn.disabled{pointer-events:none}

.feedback{margin-top:0.75rem;min-height:3rem;display:flex;flex-direction:column;align-items:center;gap:0.4rem}
.feedback .msg{font-size:1.3rem;font-weight:800}
.feedback .detail{font-size:0.8rem;color:var(--muted);max-width:340px;line-height:1.3}
.next-btn{background:none;border:2px solid #555;border-radius:10px;padding:0.5rem 2rem;color:var(--text);font-size:0.9rem;font-weight:600;cursor:pointer;transition:all 0.15s;margin-top:0.25rem}
.next-btn:active{border-color:var(--gold);color:var(--gold)}

/* Results */
.results .big-score{font-size:clamp(3.5rem,12vw,6rem);font-weight:800;color:var(--gold);line-height:1}
.results .trophy{font-size:4.5rem;margin-bottom:0.5rem}
.results .result-title{font-size:1.5rem;font-weight:800;margin-bottom:0.25rem}
.results .subtitle{color:var(--muted);margin-bottom:0.5rem;font-size:0.9rem;max-width:320px}
.results .breakdown{display:flex;gap:1.5rem;margin:1rem 0;flex-wrap:wrap;justify-content:center}
.results .bd-item{text-align:center}
.results .bd-item .num{font-size:1.6rem;font-weight:800}
.results .bd-item .lbl{font-size:0.65rem;color:var(--muted);text-transform:uppercase}
.results .stars{font-size:1.8rem;margin-bottom:0.5rem}
.results .challenge{font-size:0.85rem;color:var(--muted);margin-bottom:1.25rem;max-width:300px}
.results .btn-row{display:flex;gap:0.75rem;flex-wrap:wrap;justify-content:center}
.btn-outline{background:transparent;border:2px solid #555;border-radius:12px;padding:0.65rem 1.25rem;font-size:0.9rem;font-weight:600;cursor:pointer;color:var(--text);transition:all 0.15s}
.btn-outline:active{border-color:var(--gold);color:var(--gold)}

/* Animations */
@keyframes shake{0%,100%{transform:translateX(0)}25%{transform:translateX(-6px)}75%{transform:translateX(6px)}}
@keyframes bounce{0%,100%{transform:scale(1)}50%{transform:scale(1.2)}}
@keyframes slideUp{0%{transform:translateY(20px);opacity:0}100%{transform:translateY(0);opacity:1}}
.shake{animation:shake 0.35s ease}
.bounce{animation:bounce 0.35s ease}
.slide-up{animation:slideUp 0.3s ease-out}

@keyframes confetti-fall{0%{transform:translateY(-10px) rotate(0deg);opacity:1}100%{transform:translateY(100vh) rotate(720deg);opacity:0}}
.confetti{position:fixed;top:-10px;width:10px;height:10px;border-radius:2px;animation:confetti-fall 2.5s ease-in forwards;pointer-events:none;z-index:100}

@keyframes firework{0%{transform:scale(0);opacity:1}50%{opacity:1}100%{transform:scale(1.5);opacity:0}}
.firework{position:fixed;width:80px;height:80px;border-radius:50%;pointer-events:none;z-index:100;animation:firework 0.8s ease-out forwards}
</style>
</head>
<body>

<!-- TITLE -->
<div id="titleScreen" class="screen title active">
  <div class="icons">‚öîÔ∏è ‚ö° ‚õèÔ∏è</div>
  <h1>Hey <span class="name">Eric</span>!</h1>
  <p class="greeting">The ultimate quiz ‚Äî just for you üëá</p>
  <p class="subtitle">Star Wars ¬∑ Pok√©mon ¬∑ Minecraft</p>
  <div class="categories">
    <div class="cat-card selected" data-cat="all" onclick="pickCat(this)">
      <div class="icon">üåü</div>
      <div class="label">All Mixed</div>
    </div>
    <div class="cat-card" data-cat="starwars" onclick="pickCat(this)">
      <div class="icon">‚öîÔ∏è</div>
      <div class="label">Star Wars</div>
    </div>
    <div class="cat-card" data-cat="pokemon" onclick="pickCat(this)">
      <div class="icon">‚ö°</div>
      <div class="label">Pok√©mon</div>
    </div>
    <div class="cat-card" data-cat="minecraft" onclick="pickCat(this)">
      <div class="icon">‚õèÔ∏è</div>
      <div class="label">Minecraft</div>
    </div>
  </div>
  <div class="diff-row">
    <div class="diff-pill" data-diff="easy" onclick="pickDiff(this)">üü¢ Easy</div>
    <div class="diff-pill selected" data-diff="mixed" onclick="pickDiff(this)">üåà Mixed</div>
    <div class="diff-pill" data-diff="hard" onclick="pickDiff(this)">üî¥ Hard</div>
  </div>
  <div class="q-count-row">
    <span class="lbl">Questions:</span>
    <div class="q-pill" data-qn="10" onclick="pickQn(this)">10</div>
    <div class="q-pill selected" data-qn="15" onclick="pickQn(this)">15</div>
    <div class="q-pill" data-qn="20" onclick="pickQn(this)">20</div>
    <div class="q-pill" data-qn="30" onclick="pickQn(this)">30</div>
  </div>
  <button class="btn" onclick="startQuiz()">Let's Go Eric! üöÄ</button>
</div>

<!-- QUIZ -->
<div id="quizScreen" class="screen quiz">
  <div class="progress-bar"><div class="progress-fill" id="progressFill"></div></div>
  <div class="quiz-header">
    <div class="round-badge" id="roundBadge">Easy</div>
    <div class="q-counter" id="qCounter">1/15</div>
    <div class="score-display">‚≠ê <span id="scoreNum">0</span></div>
  </div>
  <div class="streak-display" id="streakDisplay"></div>
  <div class="question-area">
    <div class="q-category" id="qCat"></div>
    <div class="q-emoji" id="qEmoji"></div>
    <div class="q-text" id="qText"></div>
    <div class="answers" id="answers"></div>
    <div class="feedback" id="feedback"></div>
  </div>
</div>

<!-- RESULTS -->
<div id="resultScreen" class="screen results">
  <div class="trophy" id="trophyEmoji">üèÜ</div>
  <div class="big-score" id="finalScore">0</div>
  <div class="result-title" id="resultTitle"></div>
  <div class="stars" id="finalStars"></div>
  <div class="subtitle" id="finalLabel"></div>
  <div class="breakdown" id="breakdown"></div>
  <div class="challenge" id="challenge"></div>
  <div class="btn-row">
    <button class="btn" onclick="startQuiz()">Play Again! üîÑ</button>
    <button class="btn-outline" onclick="resetQuiz()">Change Topic</button>
  </div>
</div>

<script>
// ============ MASSIVE QUESTIONS DATABASE ============
const QUESTIONS = {
  starwars: {
    easy: [
      { q: "Eric, what colour is a Jedi's lightsaber usually?", a: ["Blue or green", "Pink", "Orange", "Grey"], c: 0, emoji: "üîµ", detail: "Blue or green! Maybe one day you'll build your own, Eric!" },
      { q: "What's the name of the big hairy Wookiee?", a: ["Chewbacca", "Yoda", "R2-D2", "Jabba"], c: 0, emoji: "üêª", detail: "Chewbacca! He's Han Solo's best mate ‚Äî like you and Wyn!" },
      { q: "What colour is Darth Vader's lightsaber?", a: ["Green", "Blue", "Red", "Yellow"], c: 2, emoji: "üî¥", detail: "Red! Baddies always have red ones, Eric!" },
      { q: "What is Baby Yoda's favourite snack?", a: ["Pizza", "Frogs", "Chips", "Ice cream"], c: 1, emoji: "üê∏", detail: "Frogs! Grogu loves munching frogs. Bit gross, right? ü§¢" },
      { q: "What shape is the Death Star?", a: ["A cube", "A ball", "A triangle", "A star"], c: 1, emoji: "üåë", detail: "A massive ball! Bigger than Giggleswick, bigger than Yorkshire, bigger than Earth!" },
      { q: "Who says 'I am your father'?", a: ["Yoda", "Darth Vader", "Luke", "Han Solo"], c: 1, emoji: "üò±", detail: "Darth Vader! The biggest surprise in movie history!" },
      { q: "What is the little green robot called?", a: ["C-3PO", "BB-8", "R2-D2", "K-2SO"], c: 2, emoji: "ü§ñ", detail: "R2-D2! He beeps and boops and saves everyone!" },
      { q: "Does Yoda have big ears or small ears?", a: ["Tiny ears", "Big pointy ears", "No ears", "Normal ears"], c: 1, emoji: "üëÇ", detail: "Massive pointy green ears! That's how you spot a Yoda!" },
      { q: "What do Stormtroopers wear?", a: ["Black armour", "White armour", "No armour", "Red armour"], c: 1, emoji: "‚ö™", detail: "White armour! And they can't aim properly ‚Äî they miss everything!" },
      { q: "Is Darth Vader a goodie or a baddie?", a: ["Goodie", "Baddie", "Neither", "Both"], c: 3, emoji: "üñ§", detail: "Both! He starts good, turns bad, then becomes good again at the very end!" },
    ],
    medium: [
      { q: "What planet does Luke Skywalker grow up on?", a: ["Endor", "Hoth", "Tatooine", "Naboo"], c: 2, emoji: "üèúÔ∏è", detail: "Tatooine ‚Äî a desert with TWO suns! Imagine that over Giggleswick!" },
      { q: "What are the little teddy bear creatures called?", a: ["Jawas", "Ewoks", "Porgs", "Wookiees"], c: 1, emoji: "üß∏", detail: "Ewoks! Tiny but fierce ‚Äî they beat the Empire! Small but mighty, like you Eric!" },
      { q: "Who is Luke Skywalker's twin sister?", a: ["Padm√©", "Rey", "Leia", "Ahsoka"], c: 2, emoji: "üë∏", detail: "Princess Leia! Imagine finding out Vera was secretly a princess!" },
      { q: "What does Yoda teach Luke to use?", a: ["A blaster", "The Force", "A spaceship", "A shield"], c: 1, emoji: "‚ú®", detail: "'Do or do not, there is no try.' Wise words, Eric!" },
      { q: "What is Han Solo's spaceship called?", a: ["X-Wing", "Star Destroyer", "Millennium Falcon", "TIE Fighter"], c: 2, emoji: "üöÄ", detail: "The Millennium Falcon ‚Äî fastest ship in the galaxy!" },
      { q: "What sound does a lightsaber make?", a: ["Bang bang!", "Vwoom vwoom!", "Beep boop!", "Whoosh!"], c: 1, emoji: "‚öîÔ∏è", detail: "Vwoom vwoom! You've definitely made that noise, Eric! üòÑ" },
      { q: "What planet is covered in forests and has Ewoks?", a: ["Tatooine", "Hoth", "Endor", "Dagobah"], c: 2, emoji: "üå≤", detail: "Endor! Full of massive trees and cute Ewoks. Like the woods near Giggleswick but way bigger!" },
      { q: "What does BB-8 look like?", a: ["A square", "A ball with a head", "A person", "A triangle"], c: 1, emoji: "üü†", detail: "A rolling ball with a dome head! The cutest droid ever!" },
      { q: "Who trained Obi-Wan Kenobi?", a: ["Yoda", "Qui-Gon Jinn", "Mace Windu", "Luke"], c: 1, emoji: "üßî", detail: "Qui-Gon Jinn! He was Obi-Wan's teacher before Obi-Wan taught Anakin!" },
      { q: "What do the Jawas drive around in the desert?", a: ["A spaceship", "A sandcrawler", "A speeder", "A tank"], c: 1, emoji: "üöõ", detail: "A massive sandcrawler! It's like a huge moving house full of robot bits!" },
    ],
    hard: [
      { q: "What type of creature is Jabba?", a: ["A Wookiee", "A Hutt", "A Jedi", "An Ewok"], c: 1, emoji: "üêõ", detail: "A Hutt! A massive slimy slug. You wouldn't want him in Giggleswick!" },
      { q: "What is the Mandalorian's real name?", a: ["Boba Fett", "Din Djarin", "Jango Fett", "Cad Bane"], c: 1, emoji: "ü™ñ", detail: "Din Djarin! This is the way, Eric!" },
      { q: "Which planet is covered in ice and snow?", a: ["Mustafar", "Hoth", "Tatooine", "Bespin"], c: 1, emoji: "‚ùÑÔ∏è", detail: "Hoth! Even colder than Giggleswick in January, and that's saying something!" },
      { q: "Who built C-3PO?", a: ["Obi-Wan", "Han Solo", "Anakin Skywalker", "Padm√©"], c: 2, emoji: "ü§ñ", detail: "Young Anakin! He was about your age. Could you and Wyn build a robot?" },
      { q: "What colour is Mace Windu's lightsaber?", a: ["Blue", "Green", "Purple", "Red"], c: 2, emoji: "üü£", detail: "Purple! The only Jedi with a purple one ‚Äî proper special!" },
      { q: "What is Count Dooku's Sith name?", a: ["Darth Maul", "Darth Tyranus", "Darth Sidious", "Darth Plagueis"], c: 1, emoji: "‚ö°", detail: "Darth Tyranus! All Sith have 'Darth' at the start of their name!" },
      { q: "What crystal powers a lightsaber?", a: ["Diamond", "Kyber crystal", "Ruby", "Emerald"], c: 1, emoji: "üíé", detail: "A Kyber crystal! Each Jedi finds their own special crystal!" },
      { q: "Which bounty hunter wears green armour and a jetpack?", a: ["Din Djarin", "Cad Bane", "Boba Fett", "Bossk"], c: 2, emoji: "üöÄ", detail: "Boba Fett! Green armour, jetpack, proper cool!" },
      { q: "What order does Palpatine give to destroy the Jedi?", a: ["Order 55", "Order 66", "Order 77", "Order 99"], c: 1, emoji: "üìú", detail: "Order 66! The saddest moment in Star Wars!" },
      { q: "How many Star Wars films are in the main saga?", a: ["6", "9", "3", "12"], c: 1, emoji: "üé¨", detail: "9! Three trilogies: the originals, the prequels, and the sequels!" },
    ]
  },
  pokemon: {
    easy: [
      { q: "Eric! What colour is Pikachu?", a: ["Red", "Blue", "Yellow", "Green"], c: 2, emoji: "‚ö°", detail: "Yellow! The most famous Pok√©mon in the world!" },
      { q: "What does Pikachu always say?", a: ["Char char!", "Pika pika!", "Bulba!", "Squirtle!"], c: 1, emoji: "üí¨", detail: "Pika pika! Can you do the voice, Eric? Bet Wyn can!" },
      { q: "What type of Pok√©mon is Charmander?", a: ["Water", "Grass", "Fire", "Electric"], c: 2, emoji: "üî•", detail: "Fire type! The flame on his tail must NEVER go out!" },
      { q: "What do you catch Pok√©mon with?", a: ["A net", "A Pok√© Ball", "A bag", "Your hands"], c: 1, emoji: "üî¥", detail: "A Pok√© Ball! Red on top, white on the bottom!" },
      { q: "Who is Ash's best Pok√©mon friend?", a: ["Charizard", "Mewtwo", "Pikachu", "Eevee"], c: 2, emoji: "üß¢", detail: "Pikachu! Best mates from day one ‚Äî like you and Wyn!" },
      { q: "Is Squirtle a water or fire Pok√©mon?", a: ["Fire", "Water", "Grass", "Rock"], c: 1, emoji: "üíß", detail: "Water! He's a little turtle who squirts water!" },
      { q: "What does a Pok√© Ball look like?", a: ["A blue cube", "A red and white ball", "A green star", "A yellow ring"], c: 1, emoji: "üî¥", detail: "Red and white! Every Pok√©mon trainer needs them!" },
      { q: "Is Bulbasaur a plant or a fire Pok√©mon?", a: ["Fire", "Water", "Grass", "Electric"], c: 2, emoji: "üå±", detail: "Grass! He's got a big plant bulb growing on his back!" },
      { q: "What does Jigglypuff do to people?", a: ["Scares them", "Sings them to sleep", "Makes them laugh", "Chases them"], c: 1, emoji: "üé§", detail: "Sings them to sleep! Then draws on their faces with a marker! üòÇ" },
      { q: "Is Pikachu a mouse or a cat?", a: ["A cat", "A dog", "A mouse", "A bird"], c: 2, emoji: "üê≠", detail: "An Electric Mouse Pok√©mon! The cutest mouse ever!" },
    ],
    medium: [
      { q: "What does Charmander evolve into first?", a: ["Charizard", "Charmeleon", "Squirtle", "Bulbasaur"], c: 1, emoji: "ü¶é", detail: "Charmeleon! Then Charmeleon becomes Charizard ‚Äî the big dragon!" },
      { q: "What type beats Water, Eric?", a: ["Fire", "Ice", "Grass", "Rock"], c: 2, emoji: "üåø", detail: "Grass! Grass beats Water, Water beats Fire, Fire beats Grass!" },
      { q: "What is the Pok√©mon professor called?", a: ["Professor Pine", "Professor Oak", "Professor Elm", "Professor Birch"], c: 1, emoji: "üßë‚Äçüî¨", detail: "Professor Oak! He gives you your first Pok√©mon. Who'd you pick, Eric?" },
      { q: "How many Pok√©mon were in the very first games?", a: ["50", "100", "151", "200"], c: 2, emoji: "üìã", detail: "151! And now there are over 1,000!" },
      { q: "What does Eevee evolve into with a Water Stone?", a: ["Flareon", "Jolteon", "Vaporeon", "Umbreon"], c: 2, emoji: "üíé", detail: "Vaporeon! Eevee has loads of evolutions ‚Äî proper cool!" },
      { q: "Which Pok√©mon sleeps and blocks the road?", a: ["Jigglypuff", "Snorlax", "Slowpoke", "Munchlax"], c: 1, emoji: "üò¥", detail: "Snorlax! Just sleeps and eats. Sounds like a good life!" },
      { q: "What Pok√©mon evolves into three different types with stones?", a: ["Pikachu", "Eevee", "Charmander", "Squirtle"], c: 1, emoji: "üåü", detail: "Eevee! Fire Stone = Flareon, Water Stone = Vaporeon, Thunder Stone = Jolteon!" },
      { q: "What type is Pikachu?", a: ["Fire", "Water", "Electric", "Normal"], c: 2, emoji: "‚ö°", detail: "Electric! That's why his cheeks spark when he's angry!" },
      { q: "What happens when a Pok√©mon faints?", a: ["It disappears", "You take it to a Pok√©mon Centre", "It explodes", "Nothing"], c: 1, emoji: "üè•", detail: "Pok√©mon Centre! Nurse Joy heals them right up!" },
      { q: "What's the name of the evil team in the first games?", a: ["Team Aqua", "Team Galactic", "Team Rocket", "Team Magma"], c: 2, emoji: "üöÄ", detail: "Team Rocket! 'Prepare for trouble, and make it double!'" },
    ],
    hard: [
      { q: "What legendary Pok√©mon was created in a lab?", a: ["Pikachu", "Charizard", "Mewtwo", "Mew"], c: 2, emoji: "üß¨", detail: "Mewtwo! Scientists made him and he's mega powerful!" },
      { q: "What type is Gengar?", a: ["Dark", "Ghost and Poison", "Psychic", "Normal"], c: 1, emoji: "üëª", detail: "Ghost and Poison! He hides in your shadow. Spooky, Eric! üëª" },
      { q: "Which Pok√©mon is number 1 in the Pok√©dex?", a: ["Pikachu", "Charmander", "Bulbasaur", "Mew"], c: 2, emoji: "üìñ", detail: "Bulbasaur! Not Pikachu ‚Äî bet that surprised you!" },
      { q: "What can Ditto transform into?", a: ["Only Pikachu", "Only legendaries", "Any Pok√©mon", "Only small ones"], c: 2, emoji: "ü™û", detail: "Any Pok√©mon! Imagine if you could do that at school in Giggleswick!" },
      { q: "What legendary bird is an Ice type?", a: ["Moltres", "Zapdos", "Articuno", "Ho-Oh"], c: 2, emoji: "üßä", detail: "Articuno! ARTICuno = arctic = cold!" },
      { q: "What is Ash's surname?", a: ["Oak", "Ketchum", "Stone", "Trainer"], c: 1, emoji: "üß¢", detail: "Ketchum! As in 'Gotta CATCH 'em all!' Geddit?" },
      { q: "Which Pok√©mon can learn almost every move?", a: ["Pikachu", "Mewtwo", "Mew", "Arceus"], c: 2, emoji: "ü©∑", detail: "Mew! The original mythical Pok√©mon ‚Äî tiny but knows everything!" },
      { q: "What happens if you use a Fire Stone on Eevee?", a: ["Jolteon", "Vaporeon", "Flareon", "Espeon"], c: 2, emoji: "üî•", detail: "Flareon! The fluffy fire fox evolution!" },
      { q: "How do you evolve Magikarp?", a: ["Use a stone", "Level it up to 20", "Trade it", "It can't evolve"], c: 1, emoji: "üêü", detail: "Level 20! Then that useless fish becomes the mighty Gyarados! üêâ" },
      { q: "What type is super effective against Psychic?", a: ["Fire", "Water", "Bug", "Grass"], c: 2, emoji: "üêõ", detail: "Bug! And also Dark and Ghost. Psychic types hate creepy crawlies!" },
    ]
  },
  minecraft: {
    easy: [
      { q: "Eric, what do you mine stone with?", a: ["A sword", "A pickaxe", "A shovel", "An axe"], c: 1, emoji: "‚õèÔ∏è", detail: "A pickaxe! Too easy for you, Eric! ‚õèÔ∏è" },
      { q: "What colour are Creepers?", a: ["Red", "Blue", "Green", "Purple"], c: 2, emoji: "üíö", detail: "Green! And they sneak up on you... ssssSSS... BOOM! üí•" },
      { q: "What do Creepers do when they get close?", a: ["Run away", "Dance", "Explode", "Fly"], c: 2, emoji: "üí•", detail: "EXPLODE! Has one blown up your house yet, Eric?" },
      { q: "What do you sleep in to skip night?", a: ["A chair", "A bed", "A boat", "A chest"], c: 1, emoji: "üõèÔ∏è", detail: "A bed! Made from wool and wood. Skips the scary mobs!" },
      { q: "Which animal gives you wool?", a: ["Pig", "Cow", "Chicken", "Sheep"], c: 3, emoji: "üêë", detail: "Sheep! Just like the ones in the fields around Giggleswick!" },
      { q: "What shape is EVERYTHING in Minecraft?", a: ["Round", "Triangle", "Cubes!", "Star"], c: 2, emoji: "üü´", detail: "Cubes! Even the sun is square. How mad is that?" },
      { q: "What do Zombies do?", a: ["Build houses", "Chase you!", "Help you mine", "Fly around"], c: 1, emoji: "üßü", detail: "They chase you and try to get you! And they burn in sunlight!" },
      { q: "What do chickens drop?", a: ["Wool", "Diamonds", "Eggs and feathers", "Coal"], c: 2, emoji: "üêî", detail: "Eggs and feathers! And you can cook them for food too!" },
      { q: "What do you use to cut down trees?", a: ["A pickaxe", "A sword", "An axe", "A shovel"], c: 2, emoji: "ü™ì", detail: "An axe! But you CAN punch trees too ‚Äî just takes ages!" },
      { q: "What colour is a diamond in Minecraft?", a: ["Red", "Green", "Blue", "Purple"], c: 2, emoji: "üíé", detail: "Blue! That beautiful light blue when you spot one in a cave... YES!" },
    ],
    medium: [
      { q: "What do you need to make a torch?", a: ["Stick and coal", "Stone and iron", "Sand and water", "Wool and string"], c: 0, emoji: "üî¶", detail: "Stick and coal! Dead easy and lights up those scary caves!" },
      { q: "Eric, what happens if you dig straight down?", a: ["Find diamonds", "Fall in lava!", "Nothing bad", "Win the game"], c: 1, emoji: "üï≥Ô∏è", detail: "NEVER dig straight down! Rule number one, Eric. Lava = game over!" },
      { q: "What do you need to get to the Nether?", a: ["A boat", "An obsidian portal", "A ladder", "A diamond sword"], c: 1, emoji: "üü™", detail: "Obsidian portal! Light it with flint and steel!" },
      { q: "What ore is even rarer than diamond?", a: ["Iron", "Gold", "Redstone", "Emerald"], c: 3, emoji: "üíö", detail: "Emeralds! Proper rare. Did you know that?" },
      { q: "Which mob drops gunpowder?", a: ["Zombie", "Skeleton", "Creeper", "Spider"], c: 2, emoji: "üí£", detail: "Creepers! At least they're useful for something!" },
      { q: "What do you feed wolves to tame them?", a: ["Steak", "Bones", "Fish", "Apples"], c: 1, emoji: "üê∫", detail: "Bones! Give a wolf enough bones and it's your loyal dog forever!" },
      { q: "What do Endermen hate?", a: ["Swords", "Arrows", "Water", "Fire"], c: 2, emoji: "üñ§", detail: "Water! Rain hurts them too. Stand in water and they can't get you!" },
      { q: "What do you craft with 3 iron across the top of a crafting table?", a: ["Iron sword", "Iron pickaxe", "Bucket", "Iron helmet"], c: 2, emoji: "ü™£", detail: "A bucket! Super useful for carrying water or lava!" },
      { q: "What food can you get from pigs?", a: ["Steak", "Chicken", "Porkchop", "Fish"], c: 2, emoji: "üê∑", detail: "Porkchops! Cook them in a furnace for the best food!" },
      { q: "What mob shoots arrows at you?", a: ["Zombie", "Creeper", "Spider", "Skeleton"], c: 3, emoji: "üèπ", detail: "Skeletons! They're proper annoying ‚Äî always sniping from far away!" },
    ],
    hard: [
      { q: "What do you throw to find a stronghold?", a: ["Snowball", "Eye of Ender", "Ender Pearl", "Fire Charge"], c: 1, emoji: "üëÅÔ∏è", detail: "Eye of Ender! It floats through the sky towards the stronghold!" },
      { q: "What's the final boss called?", a: ["The Wither", "The Ender Dragon", "Herobrine", "The Warden"], c: 1, emoji: "üêâ", detail: "The Ender Dragon! Have you beaten it yet, Eric?" },
      { q: "How many obsidian blocks for a Nether portal?", a: ["8", "10", "12", "14"], c: 1, emoji: "üü™", detail: "10! Four bottom, four top, one each side!" },
      { q: "What do villagers use as money?", a: ["Gold", "Diamonds", "Emeralds", "Iron"], c: 2, emoji: "üßë‚Äçüåæ", detail: "Emeralds! That's why they're so valuable!" },
      { q: "What scary mob lives deep underground and is blind?", a: ["The Wither", "The Warden", "Enderman", "Elder Guardian"], c: 1, emoji: "ü¶á", detail: "The Warden! Can't see but CAN hear you. Don't even breathe near it!" },
      { q: "What do you need to make an enchanting table?", a: ["Diamonds, obsidian, book", "Gold, iron, paper", "Emeralds, wood, glass", "Redstone, stone, wool"], c: 0, emoji: "üìñ", detail: "Diamonds, obsidian, and a book! Then surround it with bookshelves for better enchantments!" },
      { q: "What dimension do Endermen come from?", a: ["The Nether", "The End", "The Overworld", "The Aether"], c: 1, emoji: "üåå", detail: "The End! That's where the Ender Dragon lives too!" },
      { q: "How do you make a Nether portal without a diamond pickaxe?", a: ["You can't", "Lava and water to make obsidian", "Use gold", "Ask a villager"], c: 1, emoji: "üß†", detail: "Pour water on lava! It makes obsidian right where you need it. Big brain move, Eric!" },
      { q: "What enchantment lets you breathe underwater?", a: ["Aqua Affinity", "Respiration", "Depth Strider", "Protection"], c: 1, emoji: "ü´ß", detail: "Respiration! Put it on your helmet and explore the ocean!" },
      { q: "What is the rarest mob in Minecraft?", a: ["Warden", "Blue Axolotl", "Ender Dragon", "Wither"], c: 1, emoji: "ü©µ", detail: "The Blue Axolotl! There's only a 1 in 1,200 chance of finding one!" },
    ]
  }
};

// ============ PERSONALITY ============
const CORRECT_MSGS = [
  "Yes Eric! üéâ", "You smashed it! ‚≠ê", "Brilliant! üåü", "Get in! üí™",
  "Awesome, Eric! üî•", "Nailed it! üéØ", "Super smart! ‚ú®", "Legend! ü§©",
  "Too easy for you! üòé", "Eric knows everything! üß†",
  "Wyn would be impressed! üëè", "On fire! üî•üî•",
  "Giggleswick genius! üèÜ", "Smashed it, mate! üí•"
];
const WRONG_MSGS = [
  "Not quite, Eric! üòÖ", "Oops! üôà", "Good guess! üí™",
  "Nearly had it! ü§è", "Tricky one! üòä", "Don't worry! üëä",
  "Ask Wyn ‚Äî bet he doesn't know either! üòÇ", "Next one's yours! üí™"
];
const STREAK_MSGS = {
  3: "üî• 3 in a row! Eric's warming up!",
  4: "üî• 4 in a row! Getting serious now!",
  5: "‚ö° 5 streak! Eric's unstoppable!",
  6: "‚ö° 6! The Giggleswick genius!",
  7: "üåü 7 in a row! Tell Vera about THIS!",
  8: "üåü 8! Tell Holly too!",
  9: "üí• 9 IN A ROW! Is this even real?!",
  10: "üèÜ TEN! Eric you absolute legend!",
  15: "üëë 15?! You might be the smartest kid in Giggleswick!",
  20: "ü§Ø TWENTY?! Right, you need harder questions!"
};

// ============ STATE ============
let selectedCat = 'all';
let selectedDiff = 'mixed';
let selectedQn = 15;
let questions = [];
let currentQ = 0;
let score = 0;
let streak = 0;
let bestStreak = 0;
let answered = false;
let catScores = { starwars:{right:0,total:0}, pokemon:{right:0,total:0}, minecraft:{right:0,total:0} };

const DIFF_COLORS = { easy:'#22c55e', medium:'#f59e0b', hard:'#ef4444' };
const DIFF_LABELS = { easy:'üü¢ Easy', medium:'üü° Medium', hard:'üî¥ Hard' };
const CAT_COLORS = { starwars:'var(--star-wars)', pokemon:'var(--pokemon)', minecraft:'var(--minecraft)' };
const CAT_LABELS = { starwars:'‚öîÔ∏è Star Wars', pokemon:'‚ö° Pok√©mon', minecraft:'‚õèÔ∏è Minecraft' };

function pickCat(el){document.querySelectorAll('.cat-card').forEach(c=>c.classList.remove('selected'));el.classList.add('selected');selectedCat=el.dataset.cat}
function pickDiff(el){document.querySelectorAll('.diff-pill').forEach(c=>c.classList.remove('selected'));el.classList.add('selected');selectedDiff=el.dataset.diff}
function pickQn(el){document.querySelectorAll('.q-pill').forEach(c=>c.classList.remove('selected'));el.classList.add('selected');selectedQn=parseInt(el.dataset.qn)}
function shuffle(a){const b=[...a];for(let i=b.length-1;i>0;i--){const j=Math.floor(Math.random()*(i+1));[b[i],b[j]]=[b[j],b[i]]}return b}

function buildQuestions() {
  const cats = selectedCat === 'all' ? ['starwars','pokemon','minecraft'] : [selectedCat];
  const pool = { easy:[], medium:[], hard:[] };
  cats.forEach(cat => {
    ['easy','medium','hard'].forEach(diff => {
      QUESTIONS[cat][diff].forEach(q => pool[diff].push({...q, cat, diff}));
    });
  });

  let picked = [];
  const n = selectedQn;
  if (selectedDiff === 'easy') {
    const easyN = Math.ceil(n * 0.7);
    const medN = n - easyN;
    picked = [...shuffle(pool.easy).slice(0, easyN), ...shuffle(pool.medium).slice(0, medN)];
  } else if (selectedDiff === 'hard') {
    const hardN = Math.ceil(n * 0.7);
    const medN = n - hardN;
    picked = [...shuffle(pool.medium).slice(0, medN), ...shuffle(pool.hard).slice(0, hardN)];
  } else {
    const third = Math.floor(n / 3);
    const remainder = n - third * 3;
    picked = [
      ...shuffle(pool.easy).slice(0, third + (remainder > 0 ? 1 : 0)),
      ...shuffle(pool.medium).slice(0, third + (remainder > 1 ? 1 : 0)),
      ...shuffle(pool.hard).slice(0, third)
    ];
  }
  // Ensure we don't exceed what we have
  return picked.slice(0, n);
}

function startQuiz() {
  questions = buildQuestions();
  if (questions.length === 0) return;
  currentQ = 0; score = 0; streak = 0; bestStreak = 0; answered = false;
  catScores = { starwars:{right:0,total:0}, pokemon:{right:0,total:0}, minecraft:{right:0,total:0} };
  showScreen('quizScreen');
  showQuestion();
}

function showScreen(id){document.querySelectorAll('.screen').forEach(s=>s.classList.remove('active'));document.getElementById(id).classList.add('active')}

function showQuestion() {
  if (currentQ >= questions.length) { showResults(); return; }
  answered = false;
  const q = questions[currentQ];

  document.getElementById('progressFill').style.width = ((currentQ/questions.length)*100)+'%';
  document.getElementById('progressFill').style.background = DIFF_COLORS[q.diff];

  const badge = document.getElementById('roundBadge');
  badge.textContent = DIFF_LABELS[q.diff];
  badge.style.background = DIFF_COLORS[q.diff]+'22';
  badge.style.color = DIFF_COLORS[q.diff];

  document.getElementById('qCounter').textContent = `${currentQ+1}/${questions.length}`;
  document.getElementById('scoreNum').textContent = score;

  const sd = document.getElementById('streakDisplay');
  if (STREAK_MSGS[streak]) sd.textContent = STREAK_MSGS[streak];
  else if (streak >= 3) sd.textContent = `üî• ${streak} in a row!`;
  else sd.textContent = '';

  document.getElementById('qCat').textContent = CAT_LABELS[q.cat];
  document.getElementById('qCat').style.color = CAT_COLORS[q.cat];
  const emojiEl = document.getElementById('qEmoji');
  emojiEl.textContent = q.emoji;
  emojiEl.className = 'q-emoji slide-up';
  document.getElementById('qText').textContent = q.q;

  const answersEl = document.getElementById('answers');
  answersEl.innerHTML = '';
  shuffle([0,1,2,3]).forEach(origIdx => {
    const btn = document.createElement('button');
    btn.className = 'answer-btn';
    btn.textContent = q.a[origIdx];
    btn.dataset.idx = origIdx;
    btn.onclick = () => pickAnswer(origIdx, btn);
    answersEl.appendChild(btn);
  });
  document.getElementById('feedback').innerHTML = '';
}

function pickAnswer(idx) {
  if (answered) return;
  answered = true;
  const q = questions[currentQ];
  const isCorrect = idx === q.c;
  const btns = document.querySelectorAll('.answer-btn');

  btns.forEach(btn => {
    btn.classList.add('disabled');
    const bIdx = parseInt(btn.dataset.idx);
    if (bIdx === q.c) btn.classList.add('correct');
    if (bIdx === idx && !isCorrect) btn.classList.add('wrong');
  });

  catScores[q.cat].total++;
  if (isCorrect) {
    score++; streak++;
    if (streak > bestStreak) bestStreak = streak;
    catScores[q.cat].right++;
    document.getElementById('scoreNum').textContent = score;
    const sd = document.getElementById('streakDisplay');
    if (STREAK_MSGS[streak]) sd.textContent = STREAK_MSGS[streak];
    else if (streak >= 3) sd.textContent = `üî• ${streak} in a row!`;
  } else {
    streak = 0;
    document.getElementById('streakDisplay').textContent = '';
  }

  const fb = document.getElementById('feedback');
  const pool = isCorrect ? CORRECT_MSGS : WRONG_MSGS;
  const msg = pool[Math.floor(Math.random() * pool.length)];
  const color = isCorrect ? 'var(--correct)' : 'var(--wrong)';
  const anim = isCorrect ? 'bounce' : 'shake';
  fb.innerHTML = `
    <div class="msg ${anim}" style="color:${color}">${msg}</div>
    <div class="detail">${q.detail}</div>
    <button class="next-btn" onclick="nextQuestion()">Next ‚Üí</button>
  `;
}

function nextQuestion(){ currentQ++; showQuestion(); }

function showResults() {
  document.getElementById('progressFill').style.width = '100%';
  const pct = Math.round((score/questions.length)*100);
  let trophy, title, subtitle;

  if (pct === 100) {
    trophy='üëë'; title="PERFECT SCORE!";
    subtitle="Every. Single. One. Eric, you're the smartest kid in Giggleswick! Go tell Vera, Holly, and Wyn!";
  } else if (pct >= 90) {
    trophy='üèÜ'; title="Quiz Champion!";
    subtitle="Incredible, Eric! You should challenge Wyn to beat that!";
  } else if (pct >= 70) {
    trophy='ü•á'; title="Superstar!";
    subtitle="Proper brilliant, Eric! Vera and Holly would be impressed!";
  } else if (pct >= 50) {
    trophy='‚≠ê'; title="Great job, Eric!";
    subtitle="More than half right! Have another go and beat your score!";
  } else if (pct >= 30) {
    trophy='üëè'; title="Good effort!";
    subtitle="You're learning loads! Play again with Wyn and see who wins!";
  } else {
    trophy='üí™'; title="Keep going, Eric!";
    subtitle="Practice makes perfect! Try Easy mode first!";
  }

  document.getElementById('trophyEmoji').textContent = trophy;
  document.getElementById('finalScore').textContent = `${score}/${questions.length}`;
  document.getElementById('resultTitle').textContent = title;
  document.getElementById('finalLabel').textContent = subtitle;

  const starCount = Math.ceil((score/questions.length)*5);
  document.getElementById('finalStars').textContent = '‚≠ê'.repeat(starCount)+'‚òÜ'.repeat(5-starCount);

  const ch = document.getElementById('challenge');
  if (pct === 100 && selectedDiff !== 'hard') ch.textContent = "Try Hard mode if you dare! üòà";
  else if (pct === 100 && selectedQn < 30) ch.textContent = "Perfect! Now try 30 questions! ü§Ø";
  else if (bestStreak >= 5) ch.textContent = `üî• Best streak: ${bestStreak} in a row! Can you beat that?`;
  else ch.textContent = `Challenge: Get ${Math.min(score+3, questions.length)} next time! Go on Eric!`;

  const bd = document.getElementById('breakdown');
  bd.innerHTML = '';
  Object.keys(catScores).forEach(cat => {
    const cs = catScores[cat];
    if (cs.total > 0) {
      bd.innerHTML += `<div class="bd-item"><div class="num" style="color:${CAT_COLORS[cat]}">${cs.right}/${cs.total}</div><div class="lbl">${cat==='starwars'?'Star Wars':cat==='pokemon'?'Pok√©mon':'Minecraft'}</div></div>`;
    }
  });

  showScreen('resultScreen');
  if (pct >= 50) spawnConfetti();
  if (pct === 100) spawnFireworks();
}

function spawnConfetti(){const c=['#FFE81F','#FF6B6B','#5BBF3E','#6366f1','#f5c518','#22c55e'];for(let i=0;i<60;i++){const e=document.createElement('div');e.className='confetti';e.style.left=Math.random()*100+'vw';e.style.background=c[Math.floor(Math.random()*c.length)];e.style.animationDelay=Math.random()*2+'s';e.style.animationDuration=(2+Math.random()*2)+'s';e.style.width=(6+Math.random()*10)+'px';e.style.height=(6+Math.random()*10)+'px';document.body.appendChild(e);setTimeout(()=>e.remove(),5000)}}
function spawnFireworks(){const c=['#FFE81F44','#FF6B6B44','#5BBF3E44','#6366f144'];for(let i=0;i<8;i++){setTimeout(()=>{const f=document.createElement('div');f.className='firework';f.style.left=(10+Math.random()*80)+'vw';f.style.top=(10+Math.random()*60)+'vh';f.style.background=`radial-gradient(circle,${c[Math.floor(Math.random()*c.length)]},transparent)`;document.body.appendChild(f);setTimeout(()=>f.remove(),1000)},i*350)}}
function resetQuiz(){showScreen('titleScreen')}
</script>
</body>
</html>
